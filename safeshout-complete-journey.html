<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafeShout - Complete End-to-End Integration Journey</title>
  <style>
    :root {
      --primary: #2b174f;
      --secondary: #ff6b41;
      --text: #334155;
      --light-bg: #f8fafc;
      --border: #e2e8f0;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --info: #0ea5e9;
      --google-blue: #4285F4;
      --google-red: #EA4335;
      --google-yellow: #FBBC05;
      --google-green: #34A853;
      --ms-blue: #0078d4;
      --ad-blue: #00539B;
      --sims-purple: #6B46C1;
      --mosaic-blue: #0066cc;
      --mosaic-dark: #004080;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: var(--text);
      background-color: var(--light-bg);
      line-height: 1.5;
      overflow-x: hidden;
    }
    
    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      background-color: var(--primary);
      color: white;
      padding: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: bold;
      font-size: 1.25rem;
    }
    
    .logo-icon {
      width: 32px;
      height: 32px;
      background-color: var(--primary);
      border-radius: 6px;
      position: relative;
    }
    
    .logo-icon::before {
      content: "";
      position: absolute;
      top: 8px;
      left: 8px;
      width: 16px;
      height: 16px;
      background-color: var(--secondary);
      border-radius: 3px;
    }
    
    .safe {
      color: white;
    }
    
    .shout {
      color: var(--secondary);
    }

    .btn {
      display: inline-block;
      font-weight: 500;
      text-align: center;
      vertical-align: middle;
      user-select: none;
      padding: 10px 16px;
      font-size: 1rem;
      line-height: 1.5;
      border-radius: 6px;
      transition: all 0.2s;
      cursor: pointer;
      border: none;
    }
    
    .btn-primary {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #e55a36;
    }
    
    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--border);
    }
    
    .btn-outline:hover {
      background-color: #f1f5f9;
    }
    
    .btn-success {
      background-color: var(--success);
      color: white;
    }
    
    .btn-success:hover {
      background-color: #0d9488;
    }

    h1, h2, h3, h4 {
      color: var(--primary);
      margin-bottom: 0.5em;
    }

    h1 {
      font-size: 2rem;
      margin-top: 1rem;
    }

    h2 {
      font-size: 1.5rem;
      margin-top: 2rem;
    }

    h3 {
      font-size: 1.25rem;
      margin-top: 1.5rem;
    }
    
    h4 {
      font-size: 1.1rem;
      margin-top: 1.2rem;
    }

    p {
      margin-bottom: 1em;
    }

    .hero {
      background-color: var(--primary);
      color: white;
      padding: 3rem 0;
      margin-bottom: 2rem;
    }

    .hero h1 {
      color: white;
      margin-bottom: 1rem;
    }

    .hero p {
      font-size: 1.2rem;
      max-width: 800px;
      opacity: 0.9;
    }
    
    /* Flow and journey */
    .journey-container {
      display: flex;
      flex-direction: column;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .journey-header {
      text-align: center;
      margin-bottom: 50px;
    }
    
    .journey-steps {
      position: relative;
      margin-bottom: 50px;
    }
    
    .journey-step-connection {
      position: absolute;
      top: 28px;
      left: 0;
      right: 0;
      height: 4px;
      background-color: var(--border);
      z-index: 0;
    }
    
    .journey-steps-row {
      display: flex;
      justify-content: space-between;
      position: relative;
      z-index: 1;
    }
    
    .journey-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      width: 16%;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .journey-step:hover .step-number {
      transform: scale(1.1);
    }
    
    .step-number {
      width: 60px;
      height: 60px;
      border-radius: 30px;
      background-color: white;
      border: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text);
      transition: all 0.3s;
    }
    
    .step-title {
      font-weight: 600;
      text-align: center;
      font-size: 0.95rem;
    }
    
    .step-subtitle {
      font-size: 0.85rem;
      text-align: center;
      color: #64748b;
    }
    
    .journey-step.active .step-number {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    .journey-step.active .step-title {
      color: var(--primary);
    }
    
    .journey-step.completed .step-number {
      background-color: var(--success);
      color: white;
      border-color: var(--success);
    }
    
    .journey-step.completed .step-number::after {
      content: "✓";
    }
    
    .journey-details {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    
    .stage-container {
      display: none;
    }
    
    .stage-container.active {
      display: block;
    }
    
    .timeline-arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: var(--border);
      margin: 20px 0;
    }
    
    /* Device mockups */
    .device-row {
      display: flex;
      justify-content: space-between;
      gap: 30px;
      margin-bottom: 40px;
    }
    
    .device {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    
    .device-label {
      font-weight: 600;
      margin-bottom: 15px;
      font-size: 1.1rem;
      color: var(--primary);
    }
    
    .phone-mockup {
      width: 280px;
      height: 560px;
      background-color: #1e293b;
      border-radius: 30px;
      padding: 15px;
      position: relative;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .phone-screen {
      width: 100%;
      height: 100%;
      background-color: white;
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .phone-notch {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 150px;
      height: 25px;
      background-color: #1e293b;
      border-bottom-left-radius: 15px;
      border-bottom-right-radius: 15px;
      z-index: 1;
    }
    
    .phone-header {
      background-color: var(--primary);
      color: white;
      padding: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 0;
    }
    
    .phone-content {
      flex-grow: 1;
      overflow: auto;
      padding: 20px;
    }
    
    .laptop-mockup {
      width: 560px;
      height: 340px;
      background-color: #1e293b;
      border-radius: 12px;
      padding: 12px 12px 30px;
      position: relative;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .laptop-screen {
      width: 100%;
      height: 100%;
      background-color: white;
      border-radius: 4px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .laptop-base {
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 15px;
      background-color: #27384D;
      border-bottom-left-radius: 6px;
      border-bottom-right-radius: 6px;
    }
    
    .laptop-header {
      background-color: var(--primary);
      color: white;
      padding: 10px 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .laptop-title {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .laptop-content {
      flex-grow: 1;
      overflow: auto;
      display: flex;
    }
    
    .laptop-sidebar {
      width: 180px;
      background-color: #f8fafc;
      border-right: 1px solid var(--border);
      overflow: auto;
      padding: 10px 0;
    }
    
    .sidebar-item {
      padding: 8px 15px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .sidebar-item:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }
    
    .sidebar-item.active {
      background-color: #eff6ff;
      color: #2563eb;
      position: relative;
    }
    
    .sidebar-item.active::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background-color: #2563eb;
    }
    
    .laptop-main {
      flex-grow: 1;
      padding: 15px;
      overflow: auto;
    }
    
    /* Cards and form elements */
    .card {
      background-color: white;
      border-radius: 8px;
      border: 1px solid var(--border);
      margin-bottom: 20px;
      overflow: hidden;
    }
    
    .card-header {
      padding: 12px 15px;
      border-bottom: 1px solid var(--border);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .card-body {
      padding: 15px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      font-size: 0.9rem;
    }
    
    .form-control {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.95rem;
    }
    
    .form-select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.95rem;
    }
    
    /* Tables and data displays */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    
    .data-table th {
      background-color: #f8fafc;
      padding: 8px 12px;
      text-align: left;
      font-weight: 500;
      color: #64748b;
      border-bottom: 1px solid var(--border);
    }
    
    .data-table td {
      padding: 8px 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .status-badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .badge-warning {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .badge-success {
      background-color: #dcfce7;
      color: #166534;
    }
    
    .badge-info {
      background-color: #e0f2fe;
      color: #0369a1;
    }
    
    .badge-primary {
      background-color: #eff6ff;
      color: #1e40af;
    }
    
    .badge-named {
      background-color: #dbeafe;
      color: #1e40af;
    }
    
    .badge-anonymous {
      background-color: #f3f4f6;
      color: #4b5563;
    }
    
    .badge-mosaic {
      background-color: #dbeeff;
      color: var(--mosaic-dark);
    }
    
    /* Flow diagram */
    .flow-diagram {
      position: relative;
      margin: 40px 0;
      height: 220px;
    }
    
    .flow-item {
      position: absolute;
      background-color: white;
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 10px 15px;
      min-width: 180px;
      text-align: center;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      z-index: 1;
    }
    
    .flow-arrow {
      position: absolute;
      height: 2px;
      background-color: #64748b;
      z-index: 0;
    }
    
    .flow-arrow::after {
      content: "";
      position: absolute;
      right: 0;
      top: -4px;
      width: 0;
      height: 0;
      border-left: 8px solid #64748b;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
    }
    
    /* Controls and content navigation */
    .journey-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    .control-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--primary);
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 8px 15px;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      font-weight: 500;
      font-size: 0.9rem;
    }
    
    .tab.active {
      border-bottom-color: var(--secondary);
      color: var(--secondary);
    }
    
    .tab-content {
      display: none;
      padding: 10px 0;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .info-box {
      background-color: #f8fafc;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      border-left: 4px solid var(--info);
    }
    
    .info-title {
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .alert {
      padding: 12px 15px;
      border-radius: 6px;
      margin-bottom: 15px;
      font-size: 0.95rem;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    
    .alert-info {
      background-color: #eff6ff;
      border: 1px solid #bfdbfe;
      color: #1e40af;
    }
    
    .alert-success {
      background-color: #ecfdf5;
      border: 1px solid #a7f3d0;
      color: #047857;
    }
    
    .alert-warning {
      background-color: #fffbeb;
      border: 1px solid #fcd34d;
      color: #92400e;
    }
    
    .alert-icon {
      margin-top: 2px;
    }
    
    .alert-content {
      flex-grow: 1;
    }
    
    /* System badges and special elements */
    .system-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      background-color: #f1f5f9;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .badge-google {
      background-color: #e8f0fe;
      color: var(--google-blue);
    }
    
    .badge-microsoft {
      background-color: #e6f2fa;
      color: var(--ms-blue);
    }
    
    .badge-mosaic {
      background-color: #dbeeff;
      color: var(--mosaic-dark);
    }
    
    .badge-safeshout {
      background-color: #ffeee8;
      color: var(--secondary);
    }
    
    .data-flow-item {
      background-color: #f8fafc;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
      border-left: 3px solid #94a3b8;
    }
    
    .data-flow-item.named {
      border-left-color: #2563eb;
    }
    
    .data-flow-item.anonymous {
      border-left-color: #64748b;
    }
    
    .data-flow-icon {
      display: inline-block;
      width: 24px;
      height: 24px;
      border-radius: 12px;
      background-color: white;
      border: 1px solid var(--border);
      text-align: center;
      line-height: 24px;
      font-size: 12px;
      margin-right: 8px;
    }
    
    .data-flow-title {
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    
    /* Responsive design */
    @media (max-width: 1024px) {
      .device-row {
        flex-direction: column;
        align-items: center;
      }
      
      .laptop-mockup {
        width: 100%;
        max-width: 560px;
      }
      
      .journey-steps-row {
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
      }
      
      .journey-step {
        width: 30%;
        margin-bottom: 20px;
      }
      
      .journey-step-connection {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      .journey-step {
        width: 45%;
      }
      
      .laptop-content {
        flex-direction: column;
      }
      
      .laptop-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
        display: flex;
        overflow-x: auto;
        padding: 10px;
      }
      
      .sidebar-item {
        white-space: nowrap;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <div class="logo-icon"></div>
        <div>
          <span class="safe">Safe</span><span class="shout">Shout</span>
        </div>
      </div>
    </div>
  </header>

  <div class="hero">
    <div class="container">
      <h1>Complete End-to-End Journey</h1>
      <p>Follow the complete journey of a safeguarding report from initial submission through school dashboard integration and youth worker response with MOSAIC system integration.</p>
    </div>
  </div>

  <div class="journey-container">
    <div class="journey-header">
      <h2>SafeShout Integration Journey</h2>
      <p>See how information flows securely between SafeShout's mobile app, school systems, and local authority MOSAIC software while maintaining appropriate data boundaries.</p>
    </div>
    
    <div class="journey-steps">
      <div class="journey-step-connection"></div>
      <div class="journey-steps-row">
        <div class="journey-step active" onclick="showStage(1)">
          <div class="step-number">1</div>
          <div class="step-title">Initial Report</div>
          <div class="step-subtitle">Mobile App</div>
        </div>
        
        <div class="journey-step" onclick="showStage(2)">
          <div class="step-number">2</div>
          <div class="step-title">School Integration</div>
          <div class="step-subtitle">Education Dashboard</div>
        </div>
        
        <div class="journey-step" onclick="showStage(3)">
          <div class="step-number">3</div>
          <div class="step-title">MOSAIC Sync</div>
          <div class="step-subtitle">Youth Worker Portal</div>
        </div>
        
        <div class="journey-step" onclick="showStage(4)">
          <div class="step-number">4</div>
          <div class="step-title">Data Flow</div>
          <div class="step-subtitle">Integration Overview</div>
        </div>
        
        <div class="journey-step" onclick="showStage(5)">
          <div class="step-number">5</div>
          <div class="step-title">Security & Privacy</div>
          <div class="step-subtitle">Data Protection</div>
        </div>
        
        <div class="journey-step" onclick="showStage(6)">
          <div class="step-number">6</div>
          <div class="step-title">Resolution</div>
          <div class="step-subtitle">Complete Journey</div>
        </div>
      </div>
    </div>
    
    <div class="journey-details">
      <!-- Stage 1: Initial Report -->
      <div id="stage-1" class="stage-container active">
        <h3>Stage 1: Initial Report Submission</h3>
        
        <div class="device-row">
          <div class="device">
            <div class="device-label">SafeShout Mobile App</div>
            <div class="phone-mockup">
              <div class="phone-notch"></div>
              <div class="phone-screen">
                <div class="phone-header">
                  <div class="logo-icon" style="width: 20px; height: 20px; margin-right: 8px;"></div>
                  SafeShout
                </div>
                <div class="phone-content">
                  <h3>Report a Concern</h3>
                  
                  <div class="info-box">
                    <div class="info-title">Your Report Options</div>
                    <p>You can choose to report anonymously or with your name. This choice affects how your information is shared with schools and support services.</p>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Report Type</label>
                    <select class="form-select" id="reportType" onchange="updateReportType()">
                      <option value="named">Named Report (With My Identity)</option>
                      <option value="anonymous">Anonymous Report</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Who should receive this report?</label>
                    <select class="form-select" id="recipientType" onchange="updateRecipientType()">
                      <option value="school">My School Safeguarding Team</option>
                      <option value="youth-worker">Local Youth Worker</option>
                    </select>
                  </div>
                  
                  <div id="named-fields">
                    <div class="form-group">
                      <label class="form-label">Your Name</label>
                      <input type="text" class="form-control" value="Alex Johnson">
                    </div>
                    
                    <div class="form-group">
                      <label class="form-label">School</label>
                      <input type="text" class="form-control" value="Oakwood Academy">
                    </div>
                    
                    <div class="form-group">
                      <label class="form-label">Age</label>
                      <input type="text" class="form-control" value="15">
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">What happened?</label>
                    <textarea class="form-control" rows="4">I'm being bullied by some older students near the park after school. They've been calling me names and pushing me around. This has been happening for about two weeks now.</textarea>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Where did this happen?</label>
                    <input type="text" class="form-control" value="Park near school (off school grounds)">
                  </div>
                  
                  <button class="btn btn-primary" style="width: 100%;" onclick="proceedToStage(2)">Submit Report</button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="device">
            <div class="device-label">Behind the Scenes Processing</div>
            <div class="card" style="height: 530px; overflow: auto;">
              <div class="card-header">Report Processing Log</div>
              <div class="card-body">
                <div style="font-family: monospace; font-size: 0.85rem;">
                  <div class="log-entry">
                    > Report initiated by mobile user <span id="mobileUser">Alex Johnson</span>
                  </div>
                  <div class="log-entry">
                    > Report type set to <span id="reportTypeLog">NAMED</span>
                  </div>
                  <div class="log-entry">
                    > Recipient set to <span id="recipientTypeLog">SCHOOL</span>
                  </div>
                  <div class="log-entry">
                    > Creating secure report container...
                  </div>
                  <div class="log-entry">
                    > Applying 256-bit end-to-end encryption
                  </div>
                  <div class="log-entry">
                    > Location data verified and encrypted
                  </div>
                  <div class="log-entry">
                    > Risk assessment: Initial rating MEDIUM
                  </div>
                  <div class="log-entry">
                    > Category identified: Bullying/Peer Conflict
                  </div>
                  <div class="log-entry">
                    > Generating report ID: SFS-2845-7JH9
                  </div>
                  <div class="log-entry" id="tokenLog" style="display: none;">
                    > Generating anonymous token: A7X9B2P3Q5
                  </div>
                  <div class="log-entry" id="schoolLookupLog">
                    > Looking up school integration settings for Oakwood Academy
                  </div>
                  <div class="log-entry" id="schoolIntegrationLog">
                    > School integrations found: Google Classroom, Microsoft Entra ID, Active Directory
                  </div>
                  <div class="log-entry" id="userVerificationLog">
                    > Verifying user against school database: VERIFIED
                  </div>
                  <div class="log-entry" id="youthWorkerLog" style="display: none;">
                    > Looking up local authority youth worker service
                  </div>
                  <div class="log-entry" id="mosaicLog" style="display: none;">
                    > MOSAIC integration available for named reports
                  </div>
                  <div class="log-entry">
                    > Preparing secure notification channels
                  </div>
                  <div class="log-entry" id="consentLog">
                    > Flagged for consent form requirement: YES
                  </div>
                  <div class="log-entry" id="fraserLog">
                    > Fraser Guidelines assessment required: YES (Age 15+)
                  </div>
                  <div class="log-entry">
                    > Report submitted successfully
                  </div>
                  <div class="log-entry">
                    > Notifying recipient dashboard
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #eff6ff;">
          <div class="info-title">What's Happening</div>
          <p>At this stage, the young person is using the SafeShout mobile app to submit their concern. They have the crucial choice of making a named or anonymous report and selecting who should receive their report initially (school or youth worker).</p>
          <p>Try changing the reporting type and recipient to see how the behind-the-scenes processing adapts. These initial choices determine how data flows between systems while maintaining appropriate safeguarding.</p>
        </div>
        
        <div class="journey-controls">
          <span></span>
          <button class="btn btn-primary" onclick="proceedToStage(2)">Continue to Stage 2</button>
        </div>
      </div>
      
      <!-- Stage 2: School Integration -->
      <div id="stage-2" class="stage-container">
        <h3>Stage 2: School Integration Dashboard</h3>
        
        <div class="device-row">
          <div class="device">
            <div class="device-label">School Dashboard</div>
            <div class="laptop-mockup">
              <div class="laptop-screen">
                <div class="laptop-header">
                  <div class="laptop-title">
                    <div class="logo-icon" style="width: 20px; height: 20px;"></div>
                    <span>SafeShout School Dashboard</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span>👤 Ms. Thompson (DSL)</span>
                  </div>
                </div>
                <div class="laptop-content">
                  <div class="laptop-sidebar">
                    <div class="sidebar-item">📊 Dashboard</div>
                    <div class="sidebar-item active">📝 Reports</div>
                    <div class="sidebar-item">👥 Students</div>
                    <div class="sidebar-item">🔄 Integrations</div>
                    <div class="sidebar-item">⚙️ Settings</div>
                  </div>
                  <div class="laptop-main">
                    <div class="card">
                      <div class="card-header">
                        <span id="schoolReportTitle">Report #SFS-2845-7JH9 (Named)</span>
                      </div>
                      <div class="card-body">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                          <div>
                            <strong>Status:</strong> <span class="status-badge badge-warning">New</span>
                          </div>
                          <div>
                            <strong>Category:</strong> Bullying
                          </div>
                          <div>
                            <strong>Priority:</strong> <span class="status-badge badge-warning">Medium</span>
                          </div>
                          <div>
                            <strong>Received:</strong> Today, 15:43
                          </div>
                        </div>
                        
                        <div class="tabs">
                          <div class="tab active" onclick="showTab('details-tab')">Details</div>
                          <div class="tab" onclick="showTab('student-tab')">Student Info</div>
                          <div class="tab" onclick="showTab('integration-tab')">Integration</div>
                        </div>
                        
                        <div id="details-tab" class="tab-content active">
                          <div class="form-group">
                            <label class="form-label">Reporter</label>
                            <div id="reporterValue">Alex Johnson</div>
                          </div>
                          
                          <div class="form-group">
                            <label class="form-label">Description</label>
                            <div>I'm being bullied by some older students near the park after school. They've been calling me names and pushing me around. This has been happening for about two weeks now.</div>
                          </div>
                          
                          <div class="form-group">
                            <label class="form-label">Location</label>
                            <div>Park near school (off school grounds)</div>
                          </div>
                          
                          <div class="alert alert-info">
                            <div class="alert-icon">ℹ️</div>
                            <div class="alert-content" id="alertMessage">
                              This named report was submitted to the school. The student has provided identity information and appropriate consent options.
                            </div>
                          </div>
                        </div>
                        
                        <div id="student-tab" class="tab-content">
                          <div id="student-info">
                            <div class="alert alert-info">
                              <div class="alert-icon">ℹ️</div>
                              <div class="alert-content">
                                <strong>Student data synced from connected school systems</strong>
                              </div>
                            </div>
                            
                            <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                              <div class="system-badge badge-google">Google Classroom</div>
                              <div class="system-badge badge-microsoft">Microsoft Entra ID</div>
                            </div>
                            
                            <table class="data-table">
                              <tr>
                                <td width="180"><strong>Student Name:</strong></td>
                                <td>Alex Johnson</td>
                              </tr>
                              <tr>
                                <td><strong>Student ID:</strong></td>
                                <td>OAK-1052</td>
                              </tr>
                              <tr>
                                <td><strong>Year Group:</strong></td>
                                <td>Year 10</td>
                              </tr>
                              <tr>
                                <td><strong>Form Teacher:</strong></td>
                                <td>Mr. Richards (10B)</td>
                              </tr>
                              <tr>
                                <td><strong>Email:</strong></td>
                                <td>alex.johnson@oakwoodacademy.org</td>
                              </tr>
                              <tr>
                                <td><strong>Contact Information:</strong></td>
                                <td>Parent/Guardian: Sarah Johnson - 07700 900123</td>
                              </tr>
                            </table>
                            
                            <div style="margin-top: 15px;">
                              <button class="btn btn-outline">View Full Student Record</button>
                            </div>
                          </div>
                          
                          <div id="anonymous-info" style="display: none;">
                            <div class="alert alert-warning">
                              <div class="alert-icon">⚠️</div>
                              <div class="alert-content">
                                <strong>Anonymous Report</strong>: Student information is not available as this was submitted anonymously.
                              </div>
                            </div>
                            
                            <div class="info-box">
                              <div class="info-title">Limited Information Available</div>
                              <p>This report was submitted anonymously through the SafeShout mobile app. The system is designed to protect the student's identity while still allowing them to report concerns.</p>
                              <p>You can still respond to this report through the secure messaging system, which will reach the anonymous reporter without revealing their identity.</p>
                            </div>
                            
                            <div style="margin-top: 15px;">
                              <button class="btn btn-outline">Send Response Message</button>
                            </div>
                          </div>
                        </div>
                        
                        <div id="integration-tab" class="tab-content">
                          <div class="form-group">
                            <label class="form-label">Share Report With</label>
                            <select class="form-select" id="shareSelect">
                              <option value="youth-worker">Local Youth Worker</option>
                              <option value="support">School Support Staff</option>
                              <option value="police">Police Youth Officer</option>
                            </select>
                          </div>
                          
                          <div class="form-group">
                            <label class="form-label">Sharing Permissions</label>
                            <div>
                              <div style="margin-bottom: 8px;">
                                <input type="checkbox" id="share-details" checked> 
                                <label for="share-details">Report Details</label>
                              </div>
                              <div style="margin-bottom: 8px;">
                                <input type="checkbox" id="share-student" checked> 
                                <label for="share-student">Student Information</label>
                              </div>
                              <div style="margin-bottom: 8px;">
                                <input type="checkbox" id="share-actions"> 
                                <label for="share-actions">Action Plan (when created)</label>
                              </div>
                            </div>
                          </div>
                          
                          <div class="info-box" id="youthWorkerInfo">
                            <div class="info-title">Youth Worker Information</div>
                            <p>Sharing with the local youth worker will make this report available in their SafeShout portal.</p>
                            <p>For named reports, the youth worker can sync this data with the local authority MOSAIC system if appropriate consent is provided.</p>
                          </div>
                          
                          <div style="margin-top: 15px;">
                            <button class="btn btn-primary" onclick="proceedToStage(3)">Share Report</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="card">
                      <div class="card-header">Other Recent Reports</div>
                      <div class="card-body" style="padding: 0;">
                        <table class="data-table" style="margin: 0;">
                          <thead>
                            <tr>
                              <th>ID</th>
                              <th>Date</th>
                              <th>Category</th>
                              <th>Type</th>
                              <th>Status</th>
                              <th>Priority</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>SFS-2844</td>
                              <td>Yesterday</td>
                              <td>Online Safety</td>
                              <td><span class="status-badge badge-anonymous">Anonymous</span></td>
                              <td><span class="status-badge badge-warning">New</span></td>
                              <td><span class="status-badge badge-warning">Medium</span></td>
                            </tr>
                            <tr>
                              <td>SFS-2843</td>
                              <td>2 days ago</td>
                              <td>Mental Health</td>
                              <td><span class="status-badge badge-named">Named</span></td>
                              <td><span class="status-badge badge-info">In Progress</span></td>
                              <td><span class="status-badge badge-warning">Medium</span></td>
                            </tr>
                            <tr>
                              <td>SFS-2840</td>
                              <td>3 days ago</td>
                              <td>Attendance</td>
                              <td><span class="status-badge badge-named">Named</span></td>
                              <td><span class="status-badge badge-success">Resolved</span></td>
                              <td><span class="status-badge badge-success">Low</span></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="laptop-base"></div>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #eff6ff; margin-top: 30px;">
          <div class="info-title">School Integration Details</div>
          <p>At this stage, the school's designated safeguarding lead (DSL) receives and processes the report through their SafeShout dashboard. The system provides different information based on whether the report is named or anonymous.</p>
          <p>For named reports, SafeShout integrates with the school's existing systems (Google Classroom, Microsoft Entra ID, Active Directory) to provide verified student information automatically. For anonymous reports, these details are protected while still allowing the school to respond.</p>
          <p>The dashboard allows for secure sharing of appropriate information with other support services like local youth workers.</p>
        </div>
        
        <div class="journey-controls">
          <button class="btn btn-outline" onclick="goToStage(1)">Back to Stage 1</button>
          <button class="btn btn-primary" onclick="proceedToStage(3)">Continue to Stage 3</button>
        </div>
      </div>
      
      <!-- Stage 3: MOSAIC Sync -->
      <div id="stage-3" class="stage-container">
        <h3>Stage 3: Youth Worker Portal with MOSAIC Integration</h3>
        
        <div class="device-row">
          <div class="device">
            <div class="device-label">Youth Worker Portal</div>
            <div class="laptop-mockup">
              <div class="laptop-screen">
                <div class="laptop-header">
                  <div class="laptop-title">
                    <div class="logo-icon" style="width: 20px; height: 20px;"></div>
                    <span>SafeShout Youth Worker Portal</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span>👤 James Taylor (Youth Worker)</span>
                  </div>
                </div>
                <div class="laptop-content">
                  <div class="laptop-sidebar">
                    <div class="sidebar-item">📊 Dashboard</div>
                    <div class="sidebar-item">📝 Reports</div>
                    <div class="sidebar-item active">📁 Case Management</div>
                    <div class="sidebar-item">🔄 MOSAIC Integration</div>
                    <div class="sidebar-item">⚙️ Settings</div>
                  </div>
                  <div class="laptop-main">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                      <h3 style="margin: 0;">Case: Bullying Incident</h3>
                      <div>
                        <button class="btn btn-outline" style="margin-right: 10px;">Share with School</button>
                        <button class="btn btn-primary" id="syncMosaicBtn" onclick="toggleMosaicSync()">Sync to MOSAIC</button>
                      </div>
                    </div>
                    
                    <div class="alert alert-info" id="yw-alert-named">
                      <div class="alert-icon">ℹ️</div>
                      <div class="alert-content">
                        <strong>Named Report:</strong> This report includes personal identification and is eligible for MOSAIC synchronization. The young person has provided appropriate consent.
                      </div>
                    </div>
                    
                    <div class="alert alert-warning" id="yw-alert-anonymous" style="display: none;">
                      <div class="alert-icon">⚠️</div>
                      <div class="alert-content">
                        <strong>Anonymous Report:</strong> This report cannot be synced to MOSAIC as it was submitted anonymously. You can still provide support through SafeShout.
                      </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                      <div style="background-color: #f1f5f9; padding: 10px 15px; border-radius: 6px; display: flex; flex-direction: column; align-items: center;">
                        <div style="font-size: 0.8rem; color: #64748b;">Report ID</div>
                        <div style="font-weight: 600; color: var(--primary);">SS-3845</div>
                      </div>
                      
                      <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-weight: 500;">Status:</span>
                        <span class="status-badge badge-info">In Progress</span>
                      </div>
                      
                      <div style="margin-left: auto; text-align: right; color: #64748b; font-size: 0.9rem;">
                        <div><strong>Received:</strong> Yesterday, 15:43</div>
                        <div><strong>Last Updated:</strong> Today, 09:17</div>
                      </div>
                    </div>
                    
                    <div class="tabs">
                      <div class="tab active" onclick="showYWTab('case-details-tab')">Case Details</div>
                      <div class="tab" onclick="showYWTab('case-notes-tab')">Case Notes</div>
                      <div class="tab" onclick="showYWTab('mosaic-sync-tab')">MOSAIC Sync</div>
                    </div>
                    
                    <div id="case-details-tab" class="tab-content active">
                      <div class="card">
                        <div class="card-header">
                          <span>Personal Information</span>
                          <span class="status-badge" id="report-type-badge">Named Report</span>
                        </div>
                        <div class="card-body">
                          <div id="named-details">
                            <table class="data-table" style="margin-top: 0;">
                              <tr>
                                <td width="180"><strong>Name:</strong></td>
                                <td>Alex Johnson</td>
                              </tr>
                              <tr>
                                <td><strong>Age:</strong></td>
                                <td>15</td>
                              </tr>
                              <tr>
                                <td><strong>School:</strong></td>
                                <td>Oakwood Academy</td>
                              </tr>
                              <tr>
                                <td><strong>Year Group:</strong></td>
                                <td>Year 10</td>
                              </tr>
                              <tr>
                                <td><strong>Consent Form:</strong></td>
                                <td><span style="color: var(--success);">✓ Signed</span> - Fraser Guidelines Assessed</td>
                              </tr>
                            </table>
                          </div>
                          
                          <div id="anonymous-details" style="display: none;">
                            <div class="info-box">
                              <div class="info-title">Anonymous Report</div>
                              <p>This report was submitted anonymously. Personal information is not available.</p>
                              <p>You can still respond to and support this case through the SafeShout platform while maintaining the reporter's anonymity.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="card">
                        <div class="card-header">Incident Details</div>
                        <div class="card-body">
                          <table class="data-table" style="margin-top: 0;">
                            <tr>
                              <td width="180"><strong>Category:</strong></td>
                              <td>Bullying</td>
                            </tr>
                            <tr>
                              <td><strong>Risk Level:</strong></td>
                              <td><span class="status-badge badge-warning">Medium</span></td>
                            </tr>
                            <tr>
                              <td><strong>Location:</strong></td>
                              <td>Park near school (off school grounds)</td>
                            </tr>
                            <tr>
                              <td><strong>Description:</strong></td>
                              <td>I'm being bullied by some older students near the park after school. They've been calling me names and pushing me around. This has been happening for about two weeks now. I'm not sure who to talk to about this.</td>
                            </tr>
                          </table>
                        </div>
                      </div>
                      
                      <div class="card">
                        <div class="card-header">
                          <div>Action Plan</div>
                          <button style="background: none; border: none; cursor: pointer;">✏️</button>
                        </div>
                        <div class="card-body">
                          <ul style="padding-left: 20px; margin-bottom: 15px;">
                            <li>Scheduled initial meeting with Alex for tomorrow at 4pm</li>
                            <li>Contact school safeguarding lead for cooperation</li>
                            <li>Prepare safety plan for after-school travel</li>
                            <li>Assess need for mediation with other students</li>
                          </ul>
                          
                          <button class="btn btn-outline">Edit Plan</button>
                        </div>
                      </div>
                    </div>
                    
                    <div id="case-notes-tab" class="tab-content">
                      <div style="margin-bottom: 20px;">
                        <div class="form-group">
                          <label class="form-label">Add Case Note</label>
                          <textarea class="form-control" placeholder="Enter your case note here..."></textarea>
                        </div>
                        <div style="display: flex; gap: 10px;">
                          <button class="btn btn-primary">Save Note</button>
                          <div style="display: flex; align-items: center; margin-left: auto;">
                            <label style="position: relative; display: inline-block; width: 50px; height: 24px;">
                              <input type="checkbox" checked id="mosaic-notes-toggle" style="opacity: 0; width: 0; height: 0;">
                              <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;">
                                <span style="position: absolute; content: ''; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; transform: translateX(26px);"></span>
                              </span>
                            </label>
                            <span style="margin-left: 10px; font-size: 0.9rem;">Sync to MOSAIC</span>
                          </div>
                        </div>
                      </div>
                      
                      <div class="card">
                        <div class="card-header">James Taylor</div>
                        <div class="card-body">
                          <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <div style="font-weight: 600;">Initial Assessment</div>
                            <div style="color: #64748b; font-size: 0.9rem;">Today, 09:17</div>
                          </div>
                          <p>Created initial action plan for Alex's case. Will focus on immediate safety concerns first, then address the bullying situation with school cooperation.</p>
                          <p>Alex seems hesitant to involve parents at this stage - need to explore this further during our initial meeting.</p>
                          <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #64748b; margin-top: 10px;">
                            <div>Status: In Progress</div>
                            <div id="sync-status-note">Not synced to MOSAIC</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div id="mosaic-sync-tab" class="tab-content">
                      <div id="not-synced-content">
                        <div class="alert alert-info">
                          <div class="alert-icon">ℹ️</div>
                          <div class="alert-content">
                            <strong>MOSAIC Sync Status:</strong> This case is eligible for syncing to MOSAIC as it's a named report with appropriate consent.
                          </div>
                        </div>
                        
                        <div class="card">
                          <div class="card-header">MOSAIC Integration</div>
                          <div class="card-body">
                            <p>This case has not yet been synced to MOSAIC. Syncing this case will:</p>
                            <ul style="padding-left: 20px; margin: 15px 0;">
                              <li>Create a new case record in MOSAIC</li>
                              <li>Transfer personal information and case details</li>
                              <li>Link this SafeShout case with the MOSAIC record</li>
                              <li>Enable bi-directional updates between systems</li>
                            </ul>
                            
                            <div class="form-group">
                              <label class="form-label">Select MOSAIC Case Type</label>
                              <select class="form-select">
                                <option value="early-help">Early Help</option>
                                <option value="youth-support" selected>Youth Support Services</option>
                                <option value="safeguarding">Safeguarding Concern</option>
                              </select>
                            </div>
                            
                            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                              <input type="checkbox" id="sync-content" checked>
                              <label for="sync-content" style="margin-left: 10px;">Include all case notes and timeline events</label>
                            </div>
                            
                            <button class="btn btn-primary" onclick="performMosaicSync()">Sync to MOSAIC</button>
                          </div>
                        </div>
                      </div>
                      
                      <div id="synced-content" style="display: none;">
                        <div class="alert alert-success">
                          <div class="alert-icon">✓</div>
                          <div class="alert-content">
                            <strong>Sync Complete:</strong> Case successfully synced to MOSAIC with ID YS-2023-43621.
                          </div>
                        </div>
                        
                        <div class="card">
                          <div class="card-header">MOSAIC Integration</div>
                          <div class="card-body">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                              <div class="system-badge badge-mosaic">
                                <span>MOSAIC</span>
                              </div>
                              <div>
                                <strong>MOSAIC ID:</strong> <span style="font-family: monospace; background-color: #f1f5f9; padding: 2px 4px; border-radius: 3px; font-size: 0.85rem;">YS-2023-43621</span>
                              </div>
                              <div style="margin-left: auto;">
                                <span style="color: var(--success);">✓ Synced</span>
                              </div>
                            </div>
                            
                            <div class="form-group">
                              <label class="form-label">MOSAIC Case Status</label>
                              <select class="form-select">
                                <option value="open" selected>Open - In Progress</option>
                                <option value="assessment">Assessment</option>
                                <option value="plan">Plan in Place</option>
                                <option value="review">Review</option>
                                <option value="closed">Closed</option>
                              </select>
                            </div>
                            
                            <div class="form-group">
                              <label class="form-label">MOSAIC Case Owner</label>
                              <select class="form-select">
                                <option value="james-taylor" selected>James Taylor</option>
                                <option value="sara-williams">Sara Williams</option>
                                <option value="other">Other MOSAIC User</option>
                              </select>
                            </div>
                            
                            <div style="font-size: 0.8rem; color: #64748b; display: flex; align-items: center; gap: 5px; margin: 15px 0;">
                              <span>🔄</span> Last synced: Just now
                            </div>
                            
                            <div style="display: flex; gap: 10px;">
                              <button class="btn btn-outline">View in MOSAIC</button>
                              <button class="btn btn-outline">Sync Changes</button>
                              <button class="btn btn-outline" style="margin-left: auto; color: var(--danger);">Unlink</button>
                            </div>
                          </div>
                        </div>
                        
                        <div class="card">
                          <div class="card-header">Sync Settings</div>
                          <div class="card-body">
                            <div class="form-group">
                              <label class="form-label">Auto-Sync Options</label>
                              <div style="margin-top: 10px;">
                                <div style="margin-bottom: 10px; display: flex; align-items: center;">
                                  <input type="checkbox" id="auto-sync-notes" checked>
                                  <label for="auto-sync-notes" style="margin-left: 10px;">Automatically sync new case notes</label>
                                </div>
                                <div style="margin-bottom: 10px; display: flex; align-items: center;">
                                  <input type="checkbox" id="auto-sync-updates" checked>
                                  <label for="auto-sync-updates" style="margin-left: 10px;">Automatically sync status updates</label>
                                </div>
                                <div style="display: flex; align-items: center;">
                                  <input type="checkbox" id="auto-pull-mosaic">
                                  <label for="auto-pull-mosaic" style="margin-left: 10px;">Pull updates from MOSAIC (every 4 hours)</label>
                                </div>
                              </div>
                            </div>
                            
                            <button class="btn btn-primary">Save Settings</button>
                          </div>
                        </div>
                      </div>
                      
                      <div id="anonymous-sync-warning" style="display: none;">
                        <div class="alert alert-warning">
                          <div class="alert-icon">⚠️</div>
                          <div class="alert-content">
                            <strong>Cannot sync to MOSAIC:</strong> This report was submitted anonymously and does not contain the necessary information for MOSAIC integration.
                          </div>
                        </div>
                        
                        <div class="info-box">
                          <div class="info-title">Anonymous Reports</div>
                          <p>Anonymous reports are managed entirely within SafeShout to protect the reporter's identity. While you cannot sync this case with MOSAIC, you can still:</p>
                          <ul style="padding-left: 20px; margin: 10px 0;">
                            <li>Record case notes in SafeShout</li>
                            <li>Communicate securely with the anonymous reporter</li>
                            <li>Create and track action plans</li>
                            <li>Collaborate with school staff (if appropriate)</li>
                          </ul>
                          <p>If the young person later chooses to reveal their identity, and provides appropriate consent, MOSAIC integration may become available.</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="laptop-base"></div>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #eff6ff; margin-top: 30px;">
          <div class="info-title">Youth Worker Integration with MOSAIC</div>
          <p>At this stage, local authority youth workers receive reports through their SafeShout portal. For named reports with appropriate consent, they can sync case information with the local authority MOSAIC case management system.</p>
          <p>This integration enables:</p>
          <ul style="padding-left: 20px; margin: 10px 0;">
            <li>Bi-directional sharing of case notes and updates</li>
            <li>Consistent record-keeping across systems</li>
            <li>Better coordination of youth support services</li>
            <li>Reduced duplication of data entry</li>
          </ul>
          <p>Anonymous reports are still properly managed within SafeShout, with all safeguarding protocols applied, but are not synced to external systems to protect confidentiality.</p>
        </div>
        
        <div class="journey-controls">
          <button class="btn btn-outline" onclick="goToStage(2)">Back to Stage 2</button>
          <button class="btn btn-primary" onclick="proceedToStage(4)">Continue to Stage 4</button>
        </div>
      </div>
      
      <!-- Stage 4: Data Flow -->
      <div id="stage-4" class="stage-container">
        <h3>Stage 4: Data Flow Overview</h3>
        
        <div class="info-box" style="background-color: #eff6ff;">
          <div class="info-title">How Information Flows Between Systems</div>
          <p>SafeShout creates secure integration between different systems while ensuring appropriate data boundaries. The diagram below shows how data flows based on report type and consent options.</p>
        </div>
        
        <div class="flow-diagram">
          <!-- Mobile App -->
          <div class="flow-item" style="top: 10px; left: 0; border-color: var(--secondary);">
            SafeShout Mobile App
          </div>
          
          <!-- Flow to Central SafeShout Platform -->
          <div class="flow-arrow" style="top: 30px; left: 180px; width: 100px;"></div>
          
          <!-- Central SafeShout -->
          <div class="flow-item" style="top: 10px; left: 280px; border-color: var(--primary);">
            SafeShout Platform
          </div>
          
          <!-- Flow to School Dashboard -->
          <div class="flow-arrow" style="top: 50px; left: 330px; width: 150px; transform: rotate(45deg); transform-origin: left;"></div>
          
          <!-- Flow to Youth Worker -->
          <div class="flow-arrow" style="top: 50px; left: 330px; width: 150px; transform: rotate(-45deg); transform-origin: left;"></div>
          
          <!-- School Dashboard -->
          <div class="flow-item" style="top: 130px; left: 130px; border-color: var(--info);">
            School Dashboard
          </div>
          
          <!-- Youth Worker Portal -->
          <div class="flow-item" style="top: 130px; left: 430px; border-color: var(--info);">
            Youth Worker Portal
          </div>
          
          <!-- Flow from School to School Systems -->
          <div class="flow-arrow" style="top: 150px; left: 30px; width: 100px; transform: rotate(180deg);"></div>
          
          <!-- Flow from Youth Worker to MOSAIC -->
          <div class="flow-arrow" style="top: 150px; left: 560px; width: 100px;"></div>
          
          <!-- School Systems -->
          <div class="flow-item" style="top: 130px; left: -100px; min-width: 130px; font-size: 0.9rem; border-color: var(--google-blue);">
            School Systems
          </div>
          
          <!-- MOSAIC -->
          <div class="flow-item" style="top: 130px; left: 660px; min-width: 130px; border-color: var(--mosaic-blue);">
            MOSAIC
          </div>
        </div>
        
        <div style="display: flex; gap: 20px; margin-top: 40px;">
          <div style="flex: 1;">
            <h4>Named Reports Data Flow</h4>
            <div class="data-flow-item named">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--secondary);">1</span>
                Student Submits Named Report
              </div>
              <p>Student provides personal information and selects a recipient (school or youth worker).</p>
            </div>
            
            <div class="data-flow-item named">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--primary);">2</span>
                SafeShout Platform
              </div>
              <p>Encrypts and routes report to appropriate recipient with consent management.</p>
            </div>
            
            <div class="data-flow-item named">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--info);">3</span>
                School or Youth Worker Dashboard
              </div>
              <p>Recipient receives full report with student identification.</p>
            </div>
            
            <div class="data-flow-item named">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--google-blue);">4a</span>
                School Systems Integration
              </div>
              <p>School dashboard connects to Google Classroom, Microsoft Entra ID, or Active Directory to verify and supplement student information.</p>
            </div>
            
            <div class="data-flow-item named">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--mosaic-blue);">4b</span>
                MOSAIC Integration
              </div>
              <p>Youth worker can sync named reports to MOSAIC with appropriate consent, enabling bi-directional updates.</p>
            </div>
          </div>
          
          <div style="flex: 1;">
            <h4>Anonymous Reports Data Flow</h4>
            <div class="data-flow-item anonymous">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--secondary);">1</span>
                Student Submits Anonymous Report
              </div>
              <p>Student conceals personal information but selects a recipient (school or youth worker).</p>
            </div>
            
            <div class="data-flow-item anonymous">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--primary);">2</span>
                SafeShout Platform
              </div>
              <p>Generates anonymous token, encrypts report, and routes to recipient with identity protection.</p>
            </div>
            
            <div class="data-flow-item anonymous">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--info);">3</span>
                School or Youth Worker Dashboard
              </div>
              <p>Recipient receives report with anonymized reference ID for secure communication.</p>
            </div>
            
            <div class="data-flow-item anonymous">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--text);">4</span>
                Data Boundaries
              </div>
              <p>Anonymous reports remain within SafeShout only - they are not synced to school systems or MOSAIC to protect confidentiality.</p>
            </div>
            
            <div class="data-flow-item anonymous">
              <div class="data-flow-title">
                <span class="data-flow-icon" style="color: var(--primary);">5</span>
                Safeguarding Actions
              </div>
              <p>Support and safeguarding actions proceed through secure messaging without compromising anonymity.</p>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #eff6ff; margin-top: 30px;">
          <div class="info-title">Data Integration Principles</div>
          <p>SafeShout follows strict principles for data integration:</p>
          <ol style="padding-left: 20px; margin: 10px 0;">
            <li><strong>Consent-Driven:</strong> Integration with external systems only occurs with appropriate consent</li>
            <li><strong>Purpose-Limited:</strong> Only necessary information is shared between systems</li>
            <li><strong>Identity Protection:</strong> Anonymous reports remain anonymous throughout all systems</li>
            <li><strong>Secure Transfer:</strong> All data exchanges use end-to-end encryption</li>
            <li><strong>Organizational Boundaries:</strong> Data is ring-fenced between organizations for security and privacy</li>
          </ol>
        </div>
        
        <div class="journey-controls">
          <button class="btn btn-outline" onclick="goToStage(3)">Back to Stage 3</button>
          <button class="btn btn-primary" onclick="proceedToStage(5)">Continue to Stage 5</button>
        </div>
      </div>
      
      <!-- Stage 5: Security & Privacy -->
      <div id="stage-5" class="stage-container">
        <h3>Stage 5: Security & Privacy Protections</h3>
        
        <div class="info-box" style="background-color: #eff6ff;">
          <div class="info-title">Comprehensive Security Model</div>
          <p>SafeShout implements extensive security measures to protect sensitive information across all integrated systems.</p>
        </div>
        
        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 30px 0;">
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">End-to-End Encryption</div>
              <div class="card-body">
                <p>All data transmitted between SafeShout components is protected with 256-bit encryption. This includes:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>Mobile app to SafeShout platform</li>
                  <li>Platform to school and youth worker dashboards</li>
                  <li>Integration with school systems</li>
                  <li>MOSAIC synchronization</li>
                </ul>
                <p>Even SafeShout administrators cannot access the decrypted content of messages and reports without proper authorization.</p>
              </div>
            </div>
          </div>
          
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">Anonymous Reporting Protection</div>
              <div class="card-body">
                <p>Anonymous reports receive special protection:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>Tokenized identification system with no personally identifiable information</li>
                  <li>No IP address or device fingerprinting storage</li>
                  <li>Metadata scrubbing from uploaded media</li>
                  <li>Strict prevention of external system synchronization</li>
                  <li>Technical safeguards against attempted de-anonymization</li>
                </ul>
              </div>
            </div>
          </div>
          
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">Data Isolation</div>
              <div class="card-body">
                <p>SafeShout implements strict organizational boundaries:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>School data is isolated from other schools</li>
                  <li>Youth worker access is limited to their jurisdiction</li>
                  <li>Multi-tenant architecture with separate encryption keys</li>
                  <li>Role-based access controls within organizations</li>
                  <li>Explicit permission required for cross-organization sharing</li>
                </ul>
              </div>
            </div>
          </div>
          
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">Consent Management</div>
              <div class="card-body">
                <p>Robust consent framework includes:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>Age-appropriate consent forms</li>
                  <li>Fraser Guidelines assessment for 15+ year olds</li>
                  <li>Granular data sharing permissions</li>
                  <li>Revocable consent with audit trail</li>
                  <li>Parental notification options where appropriate</li>
                </ul>
              </div>
            </div>
          </div>
          
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">External System Integration</div>
              <div class="card-body">
                <p>Secure integration methodology:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>OAuth 2.0 and OIDC authentication with school systems</li>
                  <li>LDAP Secure for Active Directory</li>
                  <li>Dedicated API endpoints for MOSAIC with mutual TLS</li>
                  <li>Data transformation layer to standardize information</li>
                  <li>Read-only access where possible to minimize risk</li>
                </ul>
              </div>
            </div>
          </div>
          
          <div style="flex: 1; min-width: 300px;">
            <div class="card">
              <div class="card-header">Compliance & Oversight</div>
              <div class="card-body">
                <p>Built for regulation compliance:</p>
                <ul style="padding-left: 20px; margin: 10px 0;">
                  <li>GDPR and UK Data Protection Act 2018 compliant</li>
                  <li>Designed for KCSIE (Keeping Children Safe in Education) requirements</li>
                  <li>Comprehensive audit logging of all access and actions</li>
                  <li>Regular penetration testing and security audits</li>
                  <li>Privacy by design principles throughout</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #eff6ff;">
          <div class="info-title">School-Specific Security</div>
          <p>For school integrations with Google Classroom, Microsoft Entra ID, and Active Directory:</p>
          <ul style="padding-left: 20px; margin: 10px 0;">
            <li>Limited scope tokens with principle of least privilege</li>
            <li>No permanent credential storage</li>
            <li>Read-only access for student information</li>
            <li>Strict data retention policies with automatic expiration</li>
          </ul>
        </div>
        
        <div class="info-box" style="background-color: #dbeeff;">
          <div class="info-title">MOSAIC Integration Security</div>
          <p>For youth worker integration with MOSAIC:</p>
          <ul style="padding-left: 20px; margin: 10px 0;">
            <li>Encrypted connection using organization-specific API keys</li>
            <li>Data synchronization only with explicit consent documentation</li>
            <li>Comprehensive logging of all data transfers</li>
            <li>Case-by-case approval for bidirectional updates</li>
            <li>Mechanism to immediately terminate integration if needed</li>
          </ul>
        </div>
        
        <div class="journey-controls">
          <button class="btn btn-outline" onclick="goToStage(4)">Back to Stage 4</button>
          <button class="btn btn-primary" onclick="proceedToStage(6)">Continue to Stage 6</button>
        </div>
      </div>
      
      <!-- Stage 6: Resolution -->
      <div id="stage-6" class="stage-container">
        <h3>Stage 6: Complete Integrated Journey</h3>
        
        <div class="info-box" style="background-color: #eff6ff;">
          <div class="info-title">End-to-End Integration Overview</div>
          <p>SafeShout provides a comprehensive, secure integration between mobile reporting, school systems, and local authority youth services with MOSAIC.</p>
        </div>
        
        <div class="card">
          <div class="card-header">Complete Journey Summary</div>
          <div class="card-body">
            <h4>Stage 1: Initial Report</h4>
            <p>A young person submits either a named or anonymous report through the SafeShout mobile app, with the option to direct it to their school or a local youth worker.</p>
            
            <div class="timeline-arrow">↓</div>
            
            <h4>Stage 2: School Dashboard Integration</h4>
            <p>For school-directed reports, the school's SafeShout dashboard receives the report. For named reports, the system automatically integrates with the school's existing systems (Google Classroom, Microsoft Entra ID, Active Directory) to provide verified student information.</p>
            
            <div class="timeline-arrow">↓</div>
            
            <h4>Stage 3: Youth Worker Portal with MOSAIC Integration</h4>
            <p>Youth workers receive reports either directly or through school sharing. For named reports with appropriate consent, the youth worker can sync case information with the local authority MOSAIC case management system, enabling consistent record-keeping and better coordination.</p>
            
            <div class="timeline-arrow">↓</div>
            
            <h4>Stage 4: Data Flow Between Systems</h4>
            <p>Information flows securely between systems with strict adherence to consent, purpose limitation, and data protection principles. Anonymous reports remain strictly within SafeShout to protect identity.</p>
            
            <div class="timeline-arrow">↓</div>
            
            <h4>Stage 5: Security & Privacy</h4>
            <p>Comprehensive security measures protect all data, including end-to-end encryption, strict data isolation, and robust access controls. Integrations with external systems follow security best practices specific to each system.</p>
            
            <div class="timeline-arrow">↓</div>
            
            <h4>Stage 6: Ongoing Support & Resolution</h4>
            <p>The integrated systems allow for coordinated support through the entire lifecycle of a report, from initial submission to resolution, while maintaining appropriate data boundaries and protecting confidentiality.</p>
          </div>
        </div>
        
        <div style="margin: 30px 0;">
          <h4>Key Benefits of the Complete Integration</h4>
          
          <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px;">
            <div style="flex: 1; min-width: 300px;">
              <div class="card">
                <div class="card-header">For Young People</div>
                <div class="card-body">
                  <ul style="padding-left: 20px; margin: 0;">
                    <li>Multiple reporting options (anonymous or named)</li>
                    <li>Choice of initial report recipient</li>
                    <li>Consistent support across systems</li>
                    <li>Clear consent and data sharing visibility</li>
                    <li>Reduced need to repeat information</li>
                    <li>Identity protection where needed</li>
                  </ul>
                </div>
              </div>
            </div>
            
            <div style="flex: 1; min-width: 300px;">
              <div class="card">
                <div class="card-header">For Schools</div>
                <div class="card-body">
                  <ul style="padding-left: 20px; margin: 0;">
                    <li>Leverages existing IT investments (Google, Microsoft)</li>
                    <li>Automatic verification of student information</li>
                    <li>Efficient collaboration with youth services</li>
                    <li>Comprehensive safeguarding record keeping</li>
                    <li>Reduced administrative burden</li>
                    <li>Compliant with KCSIE requirements</li>
                  </ul>
                </div>
              </div>
            </div>
            
            <div style="flex: 1; min-width: 300px;">
              <div class="card">
                <div class="card-header">For Youth Workers</div>
                <div class="card-body">
                  <ul style="padding-left: 20px; margin: 0;">
                    <li>Seamless MOSAIC integration for named reports</li>
                    <li>Support for anonymous cases within SafeShout</li>
                    <li>Reduced duplicate data entry</li>
                    <li>Better coordination with schools</li>
                    <li>Comprehensive case history</li>
                    <li>Bidirectional updates between systems</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="info-box" style="background-color: #ecfdf5;">
          <div class="info-title">SafeShout: Secure Integration with Choice at the Center</div>
          <p>SafeShout's integrated approach puts young people's choices at the center while ensuring appropriate safeguarding. By connecting with school systems and MOSAIC where appropriate, while maintaining strict data boundaries and protections for anonymous reporting, SafeShout provides a comprehensive solution for youth safeguarding across multiple support services.</p>
        </div>
        
        <div class="journey-controls">
          <button class="btn btn-outline" onclick="goToStage(5)">Back to Stage 5</button>
          <button class="btn btn-primary" onclick="resetJourney()">Restart Journey</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Current state of the interactive demo
    let currentReportType = 'named';
    let currentRecipient = 'school';
    let currentStage = 1;
    let mosaicSynced = false;
    
    // Update report type display
    function updateReportType() {
      currentReportType = document.getElementById('reportType').value;
      
      // Update the mobile user display
      if (currentReportType === 'named') {
        document.getElementById('mobileUser').textContent = 'Alex Johnson';
        document.getElementById('reportTypeLog').textContent = 'NAMED';
        document.getElementById('named-fields').style.display = 'block';
        document.getElementById('tokenLog').style.display = 'none';
        document.getElementById('userVerificationLog').style.display = 'block';
        document.getElementById('consentLog').style.display = 'block';
        document.getElementById('fraserLog').style.display = 'block';
      } else {
        document.getElementById('mobileUser').textContent = 'Anonymous User';
        document.getElementById('reportTypeLog').textContent = 'ANONYMOUS';
        document.getElementById('named-fields').style.display = 'none';
        document.getElementById('tokenLog').style.display = 'block';
        document.getElementById('userVerificationLog').style.display = 'none';
        document.getElementById('consentLog').style.display = 'none';
        document.getElementById('fraserLog').style.display = 'none';
      }
    }
    
    // Update recipient type display
    function updateRecipientType() {
      currentRecipient = document.getElementById('recipientType').value;
      
      // Update the processing log
      if (currentRecipient === 'school') {
        document.getElementById('recipientTypeLog').textContent = 'SCHOOL';
        document.getElementById('schoolLookupLog').style.display = 'block';
        document.getElementById('schoolIntegrationLog').style.display = 'block';
        document.getElementById('youthWorkerLog').style.display = 'none';
        document.getElementById('mosaicLog').style.display = 'none';
      } else {
        document.getElementById('recipientTypeLog').textContent = 'YOUTH WORKER';
        document.getElementById('schoolLookupLog').style.display = 'none';
        document.getElementById('schoolIntegrationLog').style.display = 'none';
        document.getElementById('youthWorkerLog').style.display = 'block';
        document.getElementById('mosaicLog').style.display = currentReportType === 'named' ? 'block' : 'none';
      }
    }
    
    // Update school dashboard based on report type
    function updateSchoolDashboard() {
      // Update report title
      const reportTitle = document.getElementById('schoolReportTitle');
      const reporterValue = document.getElementById('reporterValue');
      const alertMessage = document.getElementById('alertMessage');
      
      if (currentReportType === 'named') {
        reportTitle.textContent = 'Report #SFS-2845-7JH9 (Named)';
        reporterValue.textContent = 'Alex Johnson';
        document.getElementById('student-info').style.display = 'block';
        document.getElementById('anonymous-info').style.display = 'none';
        
        if (currentRecipient === 'school') {
          alertMessage.textContent = 'This named report was submitted to the school. The student has provided identity information and appropriate consent options.';
        } else {
          alertMessage.textContent = 'This named report was submitted to a Youth Worker rather than the school. Consider collaborative approach while respecting the student\'s choice of recipient.';
        }
      } else {
        reportTitle.textContent = 'Report #SFS-2845-7JH9 (Anonymous)';
        reporterValue.textContent = 'Anonymous Student';
        document.getElementById('student-info').style.display = 'none';
        document.getElementById('anonymous-info').style.display = 'block';
        
        if (currentRecipient === 'school') {
          alertMessage.textContent = 'This anonymous report was submitted directly to the school. Consider reviewing with DSL team to determine appropriate next steps while maintaining the reporter\'s anonymity.';
        } else {
          alertMessage.textContent = 'This anonymous report was submitted to a Youth Worker rather than the school. Consider collaborative approach while maintaining the reporter\'s anonymity.';
        }
      }
    }
    
    // Update youth worker portal based on report type
    function updateYouthWorkerPortal() {
      if (currentReportType === 'named') {
        document.getElementById('report-type-badge').textContent = 'Named Report';
        document.getElementById('report-type-badge').className = 'status-badge badge-named';
        document.getElementById('named-details').style.display = 'block';
        document.getElementById('anonymous-details').style.display = 'none';
        document.getElementById('yw-alert-named').style.display = 'block';
        document.getElementById('yw-alert-anonymous').style.display = 'none';
        document.getElementById('not-synced-content').style.display = mosaicSynced ? 'none' : 'block';
        document.getElementById('synced-content').style.display = mosaicSynced ? 'block' : 'none';
        document.getElementById('anonymous-sync-warning').style.display = 'none';
        document.getElementById('mosaic-notes-toggle').disabled = false;
        document.getElementById('syncMosaicBtn').disabled = mosaicSynced;
      } else {
        document.getElementById('report-type-badge').textContent = 'Anonymous Report';
        document.getElementById('report-type-badge').className = 'status-badge badge-anonymous';
        document.getElementById('named-details').style.display = 'none';
        document.getElementById('anonymous-details').style.display = 'block';
        document.getElementById('yw-alert-named').style.display = 'none';
        document.getElementById('yw-alert-anonymous').style.display = 'block';
        document.getElementById('not-synced-content').style.display = 'none';
        document.getElementById('synced-content').style.display = 'none';
        document.getElementById('anonymous-sync-warning').style.display = 'block';
        document.getElementById('mosaic-notes-toggle').disabled = true;
        document.getElementById('syncMosaicBtn').disabled = true;
        document.getElementById('syncMosaicBtn').textContent = 'Cannot Sync Anonymous';
      }
    }
    
    // Perform MOSAIC sync
    function performMosaicSync() {
      if (currentReportType === 'named') {
        mosaicSynced = true;
        document.getElementById('not-synced-content').style.display = 'none';
        document.getElementById('synced-content').style.display = 'block';
        document.getElementById('syncMosaicBtn').textContent = 'Synced to MOSAIC';
        document.getElementById('syncMosaicBtn').classList.remove('btn-primary');
        document.getElementById('syncMosaicBtn').classList.add('btn-success');
        document.getElementById('syncMosaicBtn').disabled = true;
        document.getElementById('sync-status-note').textContent = 'Synced to MOSAIC';
      }
    }
    
    // Toggle MOSAIC sync tab visibility
    function toggleMosaicSync() {
      showYWTab('mosaic-sync-tab');
    }
    
    // Tab switching for school dashboard
    function showTab(tabId) {
      // Hide all tab contents
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      
      // Show selected tab
      document.getElementById(tabId).style.display = 'block';
      
      // Update active state
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
        
        if (tab.getAttribute('onclick').includes(tabId)) {
          tab.classList.add('active');
        }
      });
    }
    
    // Tab switching for youth worker portal
    function showYWTab(tabId) {
      // Hide all tab contents
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      
      // Show selected tab
      document.getElementById(tabId).style.display = 'block';
      
      // Update active state
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
        
        if (tab.getAttribute('onclick').includes(tabId)) {
          tab.classList.add('active');
        }
      });
    }
    
    // Journey navigation
    function showStage(stageNumber) {
      currentStage = stageNumber;
      
      // Hide all stages
      document.querySelectorAll('.stage-container').forEach(stage => {
        stage.classList.remove('active');
      });
      
      // Show the selected stage
      document.getElementById('stage-' + stageNumber).classList.add('active');
      
      // Update step indicators
      document.querySelectorAll('.journey-step').forEach((step, index) => {
        step.classList.remove('active', 'completed');
        
        const stepNumber = index + 1;
        
        if (stepNumber === stageNumber) {
          step.classList.add('active');
        } else if (stepNumber < stageNumber) {
          step.classList.add('completed');
        }
      });
      
      // Update content based on current settings
      if (stageNumber === 2) {
        updateSchoolDashboard();
      } else if (stageNumber === 3) {
        updateYouthWorkerPortal();
      }
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    // Go to a specific stage
    function goToStage(stageNumber) {
      showStage(stageNumber);
    }
    
    // Proceed to the next stage and mark current as completed
    function proceedToStage(nextStageNumber) {
      showStage(nextStageNumber);
    }
    
    // Reset the journey
    function resetJourney() {
      currentStage = 1;
      currentReportType = 'named';
      currentRecipient = 'school';
      mosaicSynced = false;
      
      document.getElementById('reportType').value = 'named';
      document.getElementById('recipientType').value = 'school';
      
      updateReportType();
      updateRecipientType();
      
      showStage(1);
    }
    
    // Initialize the demo
    document.addEventListener('DOMContentLoaded', function() {
      updateReportType();
      updateRecipientType();
    });
  </script>
</body>
</html>