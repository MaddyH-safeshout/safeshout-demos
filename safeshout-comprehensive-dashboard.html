<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafeShout Comprehensive Dashboard</title>
  <style>
    :root {
      --safeshout-purple: #3a1a78;
      --safeshout-orange: #ff5b37;
      --school-primary: #1a365d;
      --school-secondary: #2c5282;
      --text-dark: #2d3748;
      --text-light: #718096;
      --bg-light: #f7fafc;
      --bg-white: #ffffff;
      --border-color: #e2e8f0;
      --success-green: #38a169;
      --warning-orange: #dd6b20;
      --error-red: #e53e3e;
      --info-blue: #3182ce;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: var(--bg-light);
      color: var(--text-dark);
      line-height: 1.5;
    }
    
    .dashboard-container {
      display: grid;
      grid-template-columns: 250px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "header header"
        "sidebar main";
      min-height: 100vh;
    }
    
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "header"
          "main";
      }
      
      .sidebar {
        display: none;
      }
    }
    
    /* Header */
    .header {
      grid-area: header;
      background-color: var(--bg-white);
      padding: 1rem 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .logo-divider {
      width: 1px;
      height: 36px;
      background-color: var(--border-color);
    }
    
    .user-section {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .notifications {
      position: relative;
      cursor: pointer;
    }
    
    .notification-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: var(--error-red);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Sidebar */
    .sidebar {
      grid-area: sidebar;
      background-color: var(--bg-white);
      padding: 1.5rem 0;
      border-right: 1px solid var(--border-color);
    }
    
    .nav-section {
      margin-bottom: 2rem;
    }
    
    .nav-section-title {
      padding: 0 1.5rem;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--text-light);
      margin-bottom: 0.75rem;
    }
    
    .nav-item {
      display: flex;
      align-items: center;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      color: var(--text-dark);
    }
    
    .nav-item:hover {
      background-color: var(--bg-light);
    }
    
    .nav-item.active {
      background-color: var(--bg-light);
      border-right: 3px solid var(--safeshout-orange);
      color: var(--safeshout-purple);
      font-weight: 500;
    }
    
    .nav-icon {
      margin-right: 0.75rem;
      width: 20px;
      height: 20px;
    }
    
    /* Main content */
    .main {
      grid-area: main;
      padding: 2rem;
      overflow-y: auto;
    }
    
    /* Cards */
    .card {
      background-color: var(--bg-white);
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
    }
    
    /* Grid layouts */
    .grid {
      display: grid;
      gap: 1.5rem;
    }
    
    .grid-2 {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    
    .grid-3 {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
    
    .grid-4 {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
    
    /* Stats cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background-color: var(--bg-white);
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform 0.2s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-2px);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    .stat-change {
      font-size: 0.75rem;
      margin-top: 0.25rem;
    }
    
    .stat-increase {
      color: var(--success-green);
    }
    
    .stat-decrease {
      color: var(--error-red);
    }
    
    /* Status badges */
    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    .status-open {
      background-color: #fed7aa;
      color: var(--warning-orange);
    }
    
    .status-in-progress {
      background-color: #bfdbfe;
      color: var(--info-blue);
    }
    
    .status-resolved {
      background-color: #c6f6d5;
      color: var(--success-green);
    }
    
    .status-high {
      background-color: #fed7d7;
      color: var(--error-red);
    }
    
    .status-medium {
      background-color: #fed7aa;
      color: var(--warning-orange);
    }
    
    .status-low {
      background-color: #c6f6d5;
      color: var(--success-green);
    }
    
    /* Case management table */
    .case-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    
    .case-table th,
    .case-table td {
      text-align: left;
      padding: 0.75rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .case-table th {
      background-color: var(--bg-light);
      font-weight: 600;
    }
    
    .case-table tr:hover {
      background-color: var(--bg-light);
    }
    
    /* Map container */
    .map-container {
      height: 400px;
      background-color: #dbeafe;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }
    
    .map-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(#cbd5e0 1px, transparent 1px),
        linear-gradient(90deg, #cbd5e0 1px, transparent 1px);
      background-size: 20px 20px;
      opacity: 0.3;
    }
    
    .hotspot {
      position: absolute;
      border-radius: 50%;
      animation: pulse 2s infinite;
      cursor: pointer;
    }
    
    .hotspot-high {
      background-color: rgba(229, 62, 62, 0.6);
      border: 3px solid var(--error-red);
    }
    
    .hotspot-medium {
      background-color: rgba(221, 107, 32, 0.6);
      border: 3px solid var(--warning-orange);
    }
    
    .hotspot-low {
      background-color: rgba(56, 161, 105, 0.6);
      border: 3px solid var(--success-green);
    }
    
    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.2);
        opacity: 0.7;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .map-legend {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 1rem;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.5rem;
    }
    
    /* Integration status */
    .integration-status {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background-color: var(--bg-light);
      border-radius: 6px;
      margin-bottom: 1rem;
    }
    
    .integration-icon {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 0.875rem;
    }
    
    .cpoms-icon {
      background: linear-gradient(135deg, #4a90e2, #357abd);
    }
    
    .myconcern-icon {
      background: linear-gradient(135deg, #50c878, #3a9b5c);
    }
    
    .google-icon {
      background: linear-gradient(135deg, #4285f4, #34a853);
    }
    
    .integration-info {
      flex: 1;
    }
    
    .integration-name {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    
    .integration-status-text {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 1.5rem;
    }
    
    .tab {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    
    .tab.active {
      color: var(--safeshout-purple);
      border-bottom-color: var(--safeshout-orange);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Buttons */
    .button {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-block;
    }
    
    .button-primary {
      background-color: var(--safeshout-purple);
      color: white;
    }
    
    .button-secondary {
      background-color: var(--school-primary);
      color: white;
    }
    
    .button-outline {
      background-color: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-dark);
    }
    
    .button-success {
      background-color: var(--success-green);
      color: white;
    }
    
    .button:hover {
      opacity: 0.9;
    }
    
    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 8px;
      padding: 2rem;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    /* Activity feed */
    .activity-item {
      display: flex;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-color);
    }
    
    .activity-item:last-child {
      border-bottom: none;
    }
    
    .activity-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.875rem;
      font-weight: 600;
      color: white;
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-title {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }
    
    .activity-meta {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    .activity-time {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    /* Consent form preview */
    .consent-preview {
      border: 1px solid var(--border-color);
      border-radius: 6px;
      padding: 1rem;
      background-color: #fafafa;
      margin: 1rem 0;
    }
    
    .signature-pad {
      border: 1px dashed var(--border-color);
      height: 100px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: white;
      cursor: pointer;
      margin: 1rem 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .main {
        padding: 1rem;
      }
      
      .grid-2, .grid-3, .grid-4 {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <!-- Header -->
    <header class="header">
      <div class="logo-section">
        <!-- SafeShout Logo -->
        <div style="display: flex; align-items: center;">
          <svg width="40" height="30" viewBox="0 0 50 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="38" height="28" rx="8" fill="#ff5b37"/>
            <path d="M25 30L18 24H10C6 24 4 22 4 18V10C4 6 6 4 10 4H40C44 4 46 6 46 10V18C46 22 44 24 40 24H25V30Z" fill="#ff5b37"/>
          </svg>
          <span style="font-weight: bold; font-size: 1.25rem; margin-left: 0.5rem; color: #3a1a78;">SafeShout</span>
        </div>
        
        <div class="logo-divider"></div>
        
        <!-- School Logo -->
        <div>
          <svg width="120" height="40" viewBox="0 0 160 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="6" fill="#1a365d"/>
            <path d="M20 8L32 16V32H24V24H16V32H8V16L20 8Z" fill="white"/>
            <path d="M50 14H55C56 14 57 14.2 57.7 14.6C58.4 15 59 15.5 59.4 16.2C59.8 16.9 60 17.7 60 18.6C60 19.5 59.8 20.3 59.4 21C59 21.7 58.4 22.2 57.7 22.6C57 23 56 23.2 55 23.2H52V28H50V14ZM55 21.5C55.6 21.5 56.2 21.4 56.6 21.1C57.1 20.8 57.5 20.5 57.7 20.1C58 19.7 58.1 19.2 58.1 18.6C58.1 18 58 17.5 57.7 17.1C57.4 16.7 57.1 16.4 56.6 16.1C56.1 15.8 55.6 15.7 55 15.7H52V21.5H55Z" fill="#1a365d"/>
          </svg>
        </div>
      </div>
      
      <div class="user-section">
        <div class="notifications" onclick="toggleNotifications()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
          <div class="notification-badge">3</div>
        </div>
        
        <div style="display: flex; align-items: center; gap: 0.5rem;">
          <div style="width: 32px; height: 32px; background-color: var(--safeshout-purple); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
            SJ
          </div>
          <span style="font-weight: 500;">Sarah Johnson</span>
        </div>
      </div>
    </header>
    
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="nav-section">
        <div class="nav-section-title">Dashboard</div>
        <a href="#" class="nav-item active" data-section="overview">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6a2 2 0 01-2 2H10a2 2 0 01-2-2V5z"></path>
          </svg>
          Overview
        </a>
        <a href="#" class="nav-item" data-section="reports">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          Reports
        </a>
      </div>
      
      <div class="nav-section">
        <div class="nav-section-title">Case Management</div>
        <a href="#" class="nav-item" data-section="cases">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
          </svg>
          Active Cases
        </a>
        <a href="#" class="nav-item" data-section="consent">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Consent Forms
        </a>
        <a href="#" class="nav-item" data-section="timeline">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Case Timeline
        </a>
      </div>
      
      <div class="nav-section">
        <div class="nav-section-title">Analytics</div>
        <a href="#" class="nav-item" data-section="map">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
          </svg>
          Map & Hotspots
        </a>
        <a href="#" class="nav-item" data-section="integrations">
          <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          Integrations
        </a>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main">
      <!-- Overview Section -->
      <div class="section-content active" id="overview">
        <h1 style="margin-bottom: 2rem; color: var(--safeshout-purple);">Dashboard Overview</h1>
        
        <!-- Key Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" style="color: var(--safeshout-purple);">47</div>
            <div class="stat-label">Active Reports</div>
            <div class="stat-change stat-increase">+3 this week</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--warning-orange);">23</div>
            <div class="stat-label">Open Cases</div>
            <div class="stat-change stat-increase">+2 today</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--success-green);">156</div>
            <div class="stat-label">Resolved Cases</div>
            <div class="stat-change stat-increase">+12 this month</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--info-blue);">8</div>
            <div class="stat-label">Pending Consent</div>
            <div class="stat-change stat-decrease">-2 today</div>
          </div>
        </div>
        
        <!-- Integration Status -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">System Integrations</h3>
            <span class="status-badge status-resolved">All Connected</span>
          </div>
          
          <div class="grid grid-3">
            <div class="integration-status">
              <div class="integration-icon cpoms-icon">CPOMS</div>
              <div class="integration-info">
                <div class="integration-name">CPOMS</div>
                <div class="integration-status-text">324 records synced • Last sync: 2 min ago</div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
            
            <div class="integration-status">
              <div class="integration-icon myconcern-icon">MC</div>
              <div class="integration-info">
                <div class="integration-name">MyConcern</div>
                <div class="integration-status-text">189 wellbeing records • Last sync: 5 min ago</div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
            
            <div class="integration-status">
              <div class="integration-icon google-icon">GC</div>
              <div class="integration-info">
                <div class="integration-name">Google Classroom</div>
                <div class="integration-status-text">1,247 attendance records • Last sync: 1 min ago</div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
          </div>
        </div>
        
        <!-- Recent Activity -->
        <div class="grid grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Recent Activity</h3>
              <button class="button button-outline" onclick="viewAllActivity()">View All</button>
            </div>
            
            <div id="activity-feed">
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--error-red);">!</div>
                <div class="activity-content">
                  <div class="activity-title">High-priority case escalated</div>
                  <div class="activity-meta">Case #24601 • Emily Johnson (Year 9)</div>
                </div>
                <div class="activity-time">5 min ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--success-green);">✓</div>
                <div class="activity-content">
                  <div class="activity-title">Consent form signed</div>
                  <div class="activity-meta">Case #24599 • Parent/Guardian approval</div>
                </div>
                <div class="activity-time">12 min ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar cpoms-icon">C</div>
                <div class="activity-content">
                  <div class="activity-title">CPOMS correlation detected</div>
                  <div class="activity-meta">Report #24597 linked to existing incident</div>
                </div>
                <div class="activity-time">23 min ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--safeshout-purple);">S</div>
                <div class="activity-content">
                  <div class="activity-title">New anonymous report</div>
                  <div class="activity-meta">Bullying concern • Year 8 student</div>
                </div>
                <div class="activity-time">1 hour ago</div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Priority Cases</h3>
              <button class="button button-outline" onclick="viewCaseManagement()">Manage All</button>
            </div>
            
            <table class="case-table">
              <thead>
                <tr>
                  <th>Case ID</th>
                  <th>Student</th>
                  <th>Priority</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr onclick="viewCase('24601')">
                  <td>#24601</td>
                  <td>Emily J.</td>
                  <td><span class="status-badge status-high">High</span></td>
                  <td><span class="status-badge status-in-progress">In Progress</span></td>
                </tr>
                <tr onclick="viewCase('24599')">
                  <td>#24599</td>
                  <td>Alex S.</td>
                  <td><span class="status-badge status-medium">Medium</span></td>
                  <td><span class="status-badge status-open">Open</span></td>
                </tr>
                <tr onclick="viewCase('24597')">
                  <td>#24597</td>
                  <td>Sarah W.</td>
                  <td><span class="status-badge status-low">Low</span></td>
                  <td><span class="status-badge status-resolved">Resolved</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Case Management Section -->
      <div class="section-content" id="cases">
        <h1 style="margin-bottom: 2rem; color: var(--safeshout-purple);">Case Management</h1>
        
        <div class="tabs">
          <div class="tab active" data-tab="active-cases">Active Cases</div>
          <div class="tab" data-tab="case-details">Case Details</div>
          <div class="tab" data-tab="case-history">Case History</div>
        </div>
        
        <div class="tab-content active" id="active-cases">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Active Cases Overview</h3>
              <div style="display: flex; gap: 0.5rem;">
                <button class="button button-primary" onclick="createNewCase()">New Case</button>
                <button class="button button-outline">Filter Cases</button>
              </div>
            </div>
            
            <table class="case-table">
              <thead>
                <tr>
                  <th>Case ID</th>
                  <th>Student</th>
                  <th>Type</th>
                  <th>Priority</th>
                  <th>Status</th>
                  <th>Assigned To</th>
                  <th>Last Updated</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#24601</td>
                  <td>Emily Johnson (Year 9)</td>
                  <td>Bullying</td>
                  <td><span class="status-badge status-high">High</span></td>
                  <td><span class="status-badge status-in-progress">In Progress</span></td>
                  <td>Sarah Johnson (DSL)</td>
                  <td>5 min ago</td>
                  <td>
                    <button class="button button-outline" onclick="viewCaseDetails('24601')">View</button>
                  </td>
                </tr>
                <tr>
                  <td>#24599</td>
                  <td>Alex Smith (Year 8)</td>
                  <td>Mental Health</td>
                  <td><span class="status-badge status-medium">Medium</span></td>
                  <td><span class="status-badge status-open">Open</span></td>
                  <td>David Thompson (Deputy)</td>
                  <td>12 min ago</td>
                  <td>
                    <button class="button button-outline" onclick="viewCaseDetails('24599')">View</button>
                  </td>
                </tr>
                <tr>
                  <td>#24598</td>
                  <td>James Brown (Year 7)</td>
                  <td>Online Safety</td>
                  <td><span class="status-badge status-medium">Medium</span></td>
                  <td><span class="status-badge status-in-progress">In Progress</span></td>
                  <td>Lisa Park (Counselor)</td>
                  <td>1 hour ago</td>
                  <td>
                    <button class="button button-outline" onclick="viewCaseDetails('24598')">View</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <div class="tab-content" id="case-details">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Case #24601 - Emily Johnson</h3>
              <div style="display: flex; gap: 0.5rem;">
                <span class="status-badge status-high">High Priority</span>
                <span class="status-badge status-in-progress">In Progress</span>
              </div>
            </div>
            
            <div class="grid grid-2">
              <div>
                <h4 style="margin-bottom: 1rem;">Case Information</h4>
                <div style="margin-bottom: 1rem;">
                  <strong>Student:</strong> Emily Johnson (Year 9)<br>
                  <strong>Reported:</strong> May 20, 2024 at 10:45 AM<br>
                  <strong>Reporter:</strong> Anonymous<br>
                  <strong>Type:</strong> Bullying<br>
                  <strong>Assigned To:</strong> Sarah Johnson (DSL)
                </div>
                
                <h4 style="margin-bottom: 1rem;">Description</h4>
                <div style="background-color: var(--bg-light); padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
                  Student reported ongoing bullying incidents during lunch breaks. Multiple students involved in verbal harassment and social exclusion. Student feeling isolated and anxious about attending school.
                </div>
                
                <h4 style="margin-bottom: 1rem;">Linked Data</h4>
                <div class="integration-status">
                  <div class="integration-icon cpoms-icon">C</div>
                  <div class="integration-info">
                    <div class="integration-name">CPOMS Record #CP4401</div>
                    <div class="integration-status-text">Similar incident recorded 2 weeks ago</div>
                  </div>
                  <button class="button button-outline">View</button>
                </div>
              </div>
              
              <div>
                <h4 style="margin-bottom: 1rem;">Actions Taken</h4>
                <div style="margin-bottom: 1rem;">
                  <div class="activity-item">
                    <div class="activity-avatar" style="background-color: var(--info-blue);">SJ</div>
                    <div class="activity-content">
                      <div class="activity-title">Case escalated to high priority</div>
                      <div class="activity-meta">Sarah Johnson • 5 min ago</div>
                    </div>
                  </div>
                  
                  <div class="activity-item">
                    <div class="activity-avatar" style="background-color: var(--warning-orange);">DT</div>
                    <div class="activity-content">
                      <div class="activity-title">Parent meeting scheduled</div>
                      <div class="activity-meta">David Thompson • 1 hour ago</div>
                    </div>
                  </div>
                  
                  <div class="activity-item">
                    <div class="activity-avatar" style="background-color: var(--success-green);">LP</div>
                    <div class="activity-content">
                      <div class="activity-title">Initial assessment completed</div>
                      <div class="activity-meta">Lisa Park • 2 hours ago</div>
                    </div>
                  </div>
                </div>
                
                <h4 style="margin-bottom: 1rem;">Next Steps</h4>
                <div style="background-color: #fff5f0; padding: 1rem; border-radius: 6px; border-left: 3px solid var(--warning-orange);">
                  <strong>Pending:</strong> Parent consent for counseling support<br>
                  <strong>Scheduled:</strong> Parent meeting - May 22, 2024 at 2:00 PM<br>
                  <strong>Follow-up:</strong> Weekly check-ins with student
                </div>
                
                <div style="margin-top: 1rem;">
                  <button class="button button-primary">Update Case</button>
                  <button class="button button-outline">Add Note</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="tab-content" id="case-history">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Case History & Timeline</h3>
            </div>
            
            <div style="margin-top: 1rem;">
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--error-red);">!</div>
                <div class="activity-content">
                  <div class="activity-title">Case escalated to high priority</div>
                  <div class="activity-meta">Due to repeated incidents and impact on student wellbeing</div>
                </div>
                <div class="activity-time">5 min ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--info-blue);">📅</div>
                <div class="activity-content">
                  <div class="activity-title">Parent meeting scheduled</div>
                  <div class="activity-meta">Meeting set for May 22, 2024 at 2:00 PM in DSL office</div>
                </div>
                <div class="activity-time">1 hour ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar cpoms-icon">C</div>
                <div class="activity-content">
                  <div class="activity-title">CPOMS correlation identified</div>
                  <div class="activity-meta">Linked to existing incident CP4401 from May 6, 2024</div>
                </div>
                <div class="activity-time">2 hours ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--success-green);">✓</div>
                <div class="activity-content">
                  <div class="activity-title">Initial assessment completed</div>
                  <div class="activity-meta">Risk assessment: Medium-High. Immediate support required.</div>
                </div>
                <div class="activity-time">2 hours ago</div>
              </div>
              
              <div class="activity-item">
                <div class="activity-avatar" style="background-color: var(--safeshout-purple);">S</div>
                <div class="activity-content">
                  <div class="activity-title">Case created from SafeShout report</div>
                  <div class="activity-meta">Anonymous report #24601 converted to case management</div>
                </div>
                <div class="activity-time">4 hours ago</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Consent Forms Section -->
      <div class="section-content" id="consent">
        <h1 style="margin-bottom: 2rem; color: var(--safeshout-purple);">Consent Forms Management</h1>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" style="color: var(--warning-orange);">8</div>
            <div class="stat-label">Pending Consent</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--success-green);">34</div>
            <div class="stat-label">Signed This Month</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--info-blue);">2</div>
            <div class="stat-label">Expiring Soon</div>
          </div>
        </div>
        
        <div class="grid grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Pending Consent Forms</h3>
              <button class="button button-primary" onclick="createConsentForm()">Create New</button>
            </div>
            
            <table class="case-table">
              <thead>
                <tr>
                  <th>Case ID</th>
                  <th>Student</th>
                  <th>Type</th>
                  <th>Sent</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr onclick="viewConsentForm('CF001')">
                  <td>#24601</td>
                  <td>Emily Johnson</td>
                  <td>Counseling Support</td>
                  <td>2 hours ago</td>
                  <td><span class="status-badge status-open">Pending</span></td>
                </tr>
                <tr onclick="viewConsentForm('CF002')">
                  <td>#24599</td>
                  <td>Alex Smith</td>
                  <td>Mental Health Assessment</td>
                  <td>1 day ago</td>
                  <td><span class="status-badge status-open">Pending</span></td>
                </tr>
                <tr onclick="viewConsentForm('CF003')">
                  <td>#24598</td>
                  <td>James Brown</td>
                  <td>External Support Referral</td>
                  <td>3 days ago</td>
                  <td><span class="status-badge status-resolved">Signed</span></td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Consent Form Preview</h3>
            </div>
            
            <div class="consent-preview">
              <h4 style="margin-bottom: 1rem;">Consent for Counseling Support</h4>
              <p style="margin-bottom: 1rem;"><strong>Student:</strong> Emily Johnson (Year 9)</p>
              <p style="margin-bottom: 1rem;"><strong>Case:</strong> #24601 - Bullying Support</p>
              
              <div style="margin-bottom: 1rem;">
                <p>Dear Parent/Guardian,</p>
                <p>Following a recent safeguarding concern reported through our SafeShout system, we are recommending additional counseling support for your child. This support would involve:</p>
                <ul style="margin: 1rem 0; padding-left: 2rem;">
                  <li>Weekly 30-minute sessions with our qualified school counselor</li>
                  <li>Development of coping strategies for the reported issues</li>
                  <li>Regular progress reviews with the safeguarding team</li>
                </ul>
              </div>
              
              <div class="signature-pad" onclick="signForm()">
                <span style="color: var(--text-light);">Click to add digital signature</span>
              </div>
              
              <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                <button class="button button-outline">Download PDF</button>
                <button class="button button-success">Send for Signature</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Map & Hotspots Section -->
      <div class="section-content" id="map">
        <h1 style="margin-bottom: 2rem; color: var(--safeshout-purple);">Concern Map & Hotspots</h1>
        
        <div class="grid grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Concern Hotspots Map</h3>
              <div style="display: flex; gap: 0.5rem;">
                <button class="button button-outline" onclick="toggleHeatmap()">Toggle Heatmap</button>
                <button class="button button-outline" onclick="exportMapData()">Export Data</button>
              </div>
            </div>
            
            <div class="map-container">
              <div class="map-grid"></div>
              
              <!-- Hotspots -->
              <div class="hotspot hotspot-high" style="width: 40px; height: 40px; top: 35%; left: 45%;" onclick="viewHotspot('hot1')"></div>
              <div class="hotspot hotspot-medium" style="width: 30px; height: 30px; top: 60%; left: 25%;" onclick="viewHotspot('hot2')"></div>
              <div class="hotspot hotspot-low" style="width: 25px; height: 25px; top: 20%; left: 70%;" onclick="viewHotspot('hot3')"></div>
              <div class="hotspot hotspot-medium" style="width: 35px; height: 35px; top: 75%; left: 60%;" onclick="viewHotspot('hot4')"></div>
              
              <div class="map-legend">
                <h4 style="margin-bottom: 0.75rem;">Concern Levels</h4>
                <div class="legend-item">
                  <div class="legend-color" style="background-color: var(--error-red);"></div>
                  <span>High (5+ reports)</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color" style="background-color: var(--warning-orange);"></div>
                  <span>Medium (2-4 reports)</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color" style="background-color: var(--success-green);"></div>
                  <span>Low (1 report)</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Hotspot Analysis</h3>
            </div>
            
            <div style="margin-bottom: 1.5rem;">
              <h4 style="margin-bottom: 1rem;">Main Building - Corridor B</h4>
              <div style="background-color: #fed7d7; padding: 1rem; border-radius: 6px; border-left: 3px solid var(--error-red); margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                  <span><strong>Reports:</strong> 7 incidents</span>
                  <span class="status-badge status-high">High Priority</span>
                </div>
                <div style="margin-bottom: 0.5rem;"><strong>Primary Concerns:</strong> Bullying, Physical confrontations</div>
                <div><strong>Peak Times:</strong> Lunch break (12:30-1:30 PM)</div>
              </div>
              
              <h4 style="margin-bottom: 1rem;">Sports Hall - Changing Rooms</h4>
              <div style="background-color: #fed7aa; padding: 1rem; border-radius: 6px; border-left: 3px solid var(--warning-orange); margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                  <span><strong>Reports:</strong> 3 incidents</span>
                  <span class="status-badge status-medium">Medium Priority</span>
                </div>
                <div style="margin-bottom: 0.5rem;"><strong>Primary Concerns:</strong> Inappropriate behavior, Privacy issues</div>
                <div><strong>Peak Times:</strong> After PE lessons</div>
              </div>
              
              <h4 style="margin-bottom: 1rem;">Recommendations</h4>
              <ul style="padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Increase supervision during lunch breaks in Corridor B</li>
                <li>Install additional CCTV coverage in identified hotspots</li>
                <li>Schedule peer mentoring presence in high-risk areas</li>
                <li>Review changing room supervision protocols</li>
              </ul>
              
              <button class="button button-primary">Generate Action Plan</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Integrations Section -->
      <div class="section-content" id="integrations">
        <h1 style="margin-bottom: 2rem; color: var(--safeshout-purple);">System Integrations</h1>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" style="color: var(--success-green);">3</div>
            <div class="stat-label">Active Integrations</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--safeshout-purple);">847</div>
            <div class="stat-label">Records Synced</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--info-blue);">99.2%</div>
            <div class="stat-label">Data Accuracy</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" style="color: var(--success-green);">2 min</div>
            <div class="stat-label">Last Sync</div>
          </div>
        </div>
        
        <div class="grid grid-3">
          <div class="card integration-card">
            <div class="card-header">
              <div class="integration-status">
                <div class="integration-icon cpoms-icon">CPOMS</div>
                <div class="integration-info">
                  <div class="integration-name">CPOMS</div>
                  <div class="integration-status-text">Child Protection Online Management</div>
                </div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
            
            <div style="margin-bottom: 1rem;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Student Records</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">324</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Safeguarding Incidents</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">47</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Child Protection Plans</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">12</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span>Last Sync</span>
                <span>3 minutes ago</span>
              </div>
            </div>
            
            <div style="display: flex; gap: 0.5rem;">
              <button class="button button-primary" onclick="syncIntegration('cpoms')">Sync Now</button>
              <button class="button button-outline" onclick="configureIntegration('cpoms')">Configure</button>
            </div>
          </div>
          
          <div class="card integration-card">
            <div class="card-header">
              <div class="integration-status">
                <div class="integration-icon myconcern-icon">MC</div>
                <div class="integration-info">
                  <div class="integration-name">MyConcern</div>
                  <div class="integration-status-text">Safeguarding & Wellbeing Platform</div>
                </div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
            
            <div style="margin-bottom: 1rem;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Wellbeing Records</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">189</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Behaviour Incidents</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">73</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Mental Health Flags</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">34</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span>Last Sync</span>
                <span>5 minutes ago</span>
              </div>
            </div>
            
            <div style="display: flex; gap: 0.5rem;">
              <button class="button button-primary" onclick="syncIntegration('myconcern')">Sync Now</button>
              <button class="button button-outline" onclick="configureIntegration('myconcern')">Configure</button>
            </div>
          </div>
          
          <div class="card integration-card">
            <div class="card-header">
              <div class="integration-status">
                <div class="integration-icon google-icon">GC</div>
                <div class="integration-info">
                  <div class="integration-name">Google Classroom</div>
                  <div class="integration-status-text">Educational Platform & Student Data</div>
                </div>
              </div>
              <span class="status-badge status-resolved">Connected</span>
            </div>
            
            <div style="margin-bottom: 1rem;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Student Enrollment</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">324</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Class Assignments</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">28</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span>Attendance Data</span>
                <span style="font-weight: 600; color: var(--safeshout-purple);">1,247</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span>Last Sync</span>
                <span>1 minute ago</span>
              </div>
            </div>
            
            <div style="display: flex; gap: 0.5rem;">
              <button class="button button-primary" onclick="syncIntegration('google')">Sync Now</button>
              <button class="button button-outline" onclick="configureIntegration('google')">Configure</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Modal for various interactions -->
  <div class="modal" id="main-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">Modal Title</h3>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div id="modal-body">
        <!-- Dynamic content -->
      </div>
    </div>
  </div>
  
  <script>
    // Navigation functionality
    function setupNavigation() {
      document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove active class from all nav items
          document.querySelectorAll('.nav-item').forEach(nav => {
            nav.classList.remove('active');
          });
          
          // Add active class to clicked item
          this.classList.add('active');
          
          // Get section to show
          const section = this.getAttribute('data-section');
          
          // Hide all sections
          document.querySelectorAll('.section-content').forEach(content => {
            content.classList.remove('active');
            content.style.display = 'none';
          });
          
          // Show target section
          const targetSection = document.getElementById(section);
          if (targetSection) {
            targetSection.classList.add('active');
            targetSection.style.display = 'block';
          }
        });
      });
    }
    
    // Tab functionality
    function setupTabs() {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const tabsContainer = this.closest('.tabs');
          const tabs = tabsContainer.querySelectorAll('.tab');
          const targetId = this.getAttribute('data-tab');
          
          // Remove active class from all tabs
          tabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          // Hide all tab contents and show target
          const tabContents = tabsContainer.parentElement.querySelectorAll('.tab-content');
          tabContents.forEach(content => content.classList.remove('active'));
          document.getElementById(targetId).classList.add('active');
        });
      });
    }
    
    // Case management functions
    function viewCase(caseId) {
      // Switch to case details tab
      document.querySelector('.nav-item[data-section="cases"]').click();
      setTimeout(() => {
        document.querySelector('.tab[data-tab="case-details"]').click();
      }, 100);
    }
    
    function viewCaseDetails(caseId) {
      viewCase(caseId);
    }
    
    function createNewCase() {
      showModal('Create New Case', `
        <div class="form-group">
          <label class="form-label">Student Name</label>
          <input type="text" class="form-input" placeholder="Enter student name">
        </div>
        <div class="form-group">
          <label class="form-label">Case Type</label>
          <select class="form-input">
            <option>Bullying</option>
            <option>Mental Health</option>
            <option>Online Safety</option>
            <option>Physical Safety</option>
            <option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Priority Level</label>
          <select class="form-input">
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea class="form-input" rows="4" placeholder="Enter case description"></textarea>
        </div>
        <div style="margin-top: 1.5rem;">
          <button class="button button-primary">Create Case</button>
          <button class="button button-outline" onclick="closeModal()">Cancel</button>
        </div>
      `);
    }
    
    // Consent form functions
    function viewConsentForm(formId) {
      document.querySelector('.nav-item[data-section="consent"]').click();
    }
    
    function createConsentForm() {
      showModal('Create Consent Form', `
        <div class="form-group">
          <label class="form-label">Associated Case</label>
          <select class="form-input">
            <option>#24601 - Emily Johnson</option>
            <option>#24599 - Alex Smith</option>
            <option>#24598 - James Brown</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Consent Type</label>
          <select class="form-input">
            <option>Counseling Support</option>
            <option>Mental Health Assessment</option>
            <option>External Support Referral</option>
            <option>Information Sharing</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Additional Notes</label>
          <textarea class="form-input" rows="3" placeholder="Any additional information for parents"></textarea>
        </div>
        <div style="margin-top: 1.5rem;">
          <button class="button button-primary">Create & Send</button>
          <button class="button button-outline" onclick="closeModal()">Cancel</button>
        </div>
      `);
    }
    
    function signForm() {
      showModal('Digital Signature', `
        <p style="margin-bottom: 1rem;">Click and drag to create your digital signature:</p>
        <div style="border: 1px solid var(--border-color); height: 150px; border-radius: 6px; background-color: white; cursor: crosshair; position: relative;">
          <canvas width="500" height="140" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div style="margin-top: 1rem;">
          <button class="button button-success">Accept & Sign</button>
          <button class="button button-outline">Clear</button>
          <button class="button button-outline" onclick="closeModal()">Cancel</button>
        </div>
      `);
    }
    
    // Map functions
    function viewHotspot(hotspotId) {
      const hotspotData = {
        hot1: {
          name: 'Main Building - Corridor B',
          reports: 7,
          level: 'High',
          concerns: 'Bullying, Physical confrontations',
          peakTimes: 'Lunch break (12:30-1:30 PM)'
        },
        hot2: {
          name: 'Sports Hall - Changing Rooms',
          reports: 3,
          level: 'Medium',
          concerns: 'Inappropriate behavior, Privacy issues',
          peakTimes: 'After PE lessons'
        }
      };
      
      const data = hotspotData[hotspotId] || hotspotData.hot1;
      
      showModal(`Hotspot Details: ${data.name}`, `
        <div style="margin-bottom: 1rem;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span><strong>Total Reports:</strong></span>
            <span>${data.reports} incidents</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span><strong>Priority Level:</strong></span>
            <span class="status-badge status-${data.level.toLowerCase()}">${data.level}</span>
          </div>
          <div style="margin-bottom: 0.5rem;">
            <strong>Primary Concerns:</strong> ${data.concerns}
          </div>
          <div style="margin-bottom: 1rem;">
            <strong>Peak Times:</strong> ${data.peakTimes}
          </div>
        </div>
        <h4 style="margin-bottom: 0.5rem;">Recent Reports</h4>
        <div style="background-color: var(--bg-light); padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
          <div style="margin-bottom: 0.5rem;">Report #24601 - May 20, 2024</div>
          <div style="margin-bottom: 0.5rem;">Report #24598 - May 18, 2024</div>
          <div>Report #24595 - May 15, 2024</div>
        </div>
        <div style="margin-top: 1.5rem;">
          <button class="button button-primary">Create Action Plan</button>
          <button class="button button-outline">View All Reports</button>
        </div>
      `);
    }
    
    function toggleHeatmap() {
      alert('Heatmap view toggled');
    }
    
    function exportMapData() {
      alert('Map data exported to CSV');
    }
    
    // Integration functions
    function syncIntegration(platform) {
      alert(`Syncing ${platform.toUpperCase()} data...`);
      // Simulate sync completion
      setTimeout(() => {
        alert(`${platform.toUpperCase()} sync completed successfully!`);
      }, 1500);
    }
    
    function configureIntegration(platform) {
      showModal(`Configure ${platform.toUpperCase()} Integration`, `
        <div class="form-group">
          <label class="form-label">API Endpoint</label>
          <input type="text" class="form-input" value="https://api.${platform}.example.com">
        </div>
        <div class="form-group">
          <label class="form-label">API Key</label>
          <input type="password" class="form-input" value="••••••••••••••••">
        </div>
        <div class="form-group">
          <label class="form-label">Sync Frequency</label>
          <select class="form-input">
            <option>Every 5 minutes</option>
            <option>Every 15 minutes</option>
            <option>Every 30 minutes</option>
            <option>Every hour</option>
          </select>
        </div>
        <div style="margin-top: 1.5rem;">
          <button class="button button-primary">Save Configuration</button>
          <button class="button button-outline">Test Connection</button>
        </div>
      `);
    }
    
    // Notification functions
    function toggleNotifications() {
      showModal('Notifications', `
        <div style="margin-bottom: 1rem;">
          <div class="activity-item">
            <div class="activity-avatar" style="background-color: var(--error-red);">!</div>
            <div class="activity-content">
              <div class="activity-title">High-priority case requires attention</div>
              <div class="activity-meta">Case #24601 - Emily Johnson</div>
            </div>
            <div class="activity-time">5 min ago</div>
          </div>
          
          <div class="activity-item">
            <div class="activity-avatar" style="background-color: var(--warning-orange);">📝</div>
            <div class="activity-content">
              <div class="activity-title">Consent form pending signature</div>
              <div class="activity-meta">CF001 - Parent approval needed</div>
            </div>
            <div class="activity-time">1 hour ago</div>
          </div>
          
          <div class="activity-item">
            <div class="activity-avatar" style="background-color: var(--info-blue);">🔄</div>
            <div class="activity-content">
              <div class="activity-title">System sync completed</div>
              <div class="activity-meta">All integrations updated successfully</div>
            </div>
            <div class="activity-time">2 hours ago</div>
          </div>
        </div>
        <button class="button button-outline" style="width: 100%;">Mark All as Read</button>
      `);
    }
    
    // Utility functions
    function showModal(title, content) {
      document.getElementById('modal-title').textContent = title;
      document.getElementById('modal-body').innerHTML = content;
      document.getElementById('main-modal').classList.add('active');
    }
    
    function closeModal() {
      document.getElementById('main-modal').classList.remove('active');
    }
    
    function viewAllActivity() {
      document.querySelector('.nav-item[data-section="overview"]').click();
    }
    
    function viewCaseManagement() {
      document.querySelector('.nav-item[data-section="cases"]').click();
    }
    
    // Initialize dashboard
    function initDashboard() {
      setupNavigation();
      setupTabs();
      
      // Show overview section by default
      document.getElementById('overview').style.display = 'block';
      
      // Close modal when clicking outside
      document.getElementById('main-modal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal();
        }
      });
      
      // Simulate real-time updates
      setInterval(() => {
        // Update last sync times occasionally
        if (Math.random() < 0.1) {
          const times = ['Just now', '1 min ago', '2 min ago'];
          const randomTime = times[Math.floor(Math.random() * times.length)];
          // Could update sync times here
        }
      }, 30000);
    }
    
    // Start dashboard when page loads
    document.addEventListener('DOMContentLoaded', initDashboard);
  </script>
</body>
</html>